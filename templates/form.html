{% load widget_tweaks %}

{% if form.non_field_errors %}
<div class='panel panel-danger'>
  <div class='panel-heading'>Error{{ form.non_field_errors|pluralize }}</div>
  <div class='panel-body'>
    {{ form.non_field_errors }}
  </div>
</div>
{% endif %}

{% for field in form.hidden_fields %}
{{ hidden }}
{% endfor %}

{% for field in form.visible_fields %}
<div class='form-group{% if field.errors %} has-error{% endif %}'>
  {% if field|widget_type == 'checkboxinput' %}
  <div class='col-md-6 col-md-offset-2'>
    <div class='checkbox'>
      <label>
        {{ field }} {{ field.label }}
      </label>
    </div>
  </div>
  {% else %}
  <label for='{{ field.id_for_label }}' class='col-md-2 control-label'>
    {{ field.label }}
  </label>
  <div class='col-md-6'>
    {% if field|widget_type == 'select' %}
      {{ field|attr:'data-live-search:true'|add_class:'form-control' }}
    {% elif field|widget_type == 'dateinput' %}
      {{ field|add_class:'form-control datepicker' }}
    {% else %}
      {{ field|add_class:'form-control' }}
    {% endif %}
  </div>
  {% endif %}
  <div class='col-md-4'>
    {% if field.errors %}
    <ul class='help-block'>
      {% for error in field.errors %}
        <li>{{ error }}</li>
      {% endfor %}
    </ul>
    {% elif field.help_text %}
    <p class='help-block'>{{ field.help_text }}</p>
    {% endif %}
  </div>
</div>
{% endfor %}
