{% extends 'base.html' %}

{% load staticfiles %}
{% load widget_tweaks %}

{% block css_link %}
<link href='{% static "css/bootstrap-select.min.css" %}' rel='stylesheet'>
{{ block.super }}
<link href='{% static "css/datepicker3.css" %}' rel='stylesheet'>
{% endblock %}

{% block content %}
<form action='' method='post' class='form-horizontal' role='form'>
  {% csrf_token %}

  {% if form.non_field_errors %}
  <div class='panel panel-danger'>
    <div class='panel-heading'>Error{{ form.non_field_errors|pluralize }}</div>
    <div class='panel-body'>
      {{ form.non_field_errors }}
    </div>
  </div>
  {% endif %}

  {% for field in form.hidden_fields %}
  {{ hidden }}
  {% endfor %}

  {% for field in form.visible_fields %}
  <div class='form-group{% if field.errors %} has-error{% endif %}'>
    {% if field|widget_type == 'checkboxinput' %}
    <div class='col-md-5 col-md-offset-2'>
      <div class='checkbox'>
        <label>
          {{ field }} {{ field.label }}
        </label>
      </div>
    </div>
    {% else %}
    <label for='{{ field.id_for_label }}' class='col-md-2 control-label'>
      {{ field.label }}
    </label>
    <div class='col-md-5'>
      {% if field|widget_type == 'select' %}
        {{ field|attr:'data-live-search:true'|add_class:'form-control' }}
      {% elif field|widget_type == 'dateinput' %}
        {{ field|add_class:'form-control datepicker' }}
      {% else %}
        {{ field|add_class:'form-control' }}
      {% endif %}
    </div>
    {% endif %}
    <div class='col-md-5'>
      {% if field.errors %}
      <ul class='help-block'>
        {% for error in field.errors %}
          <li>{{ error }}</li>
        {% endfor %}
      </ul>
      {% elif field.help_text %}
      <p class='help-block'>{{ field.help_text }}</p>
      {% endif %}
    </div>
  </div>
  {% endfor %}

  <div class='form-group'>
    <div class='col-md-5 col-md-offset-2'>
      <input type='submit' class='btn btn-default' value='Save' />
    </div>
  </div>
</form>
{% endblock %}

{% block js_script %}
<script src='{% static "js/bootstrap-select.min.js" %}'></script>
{{ block.super }}
<script src='{% static "js/bootstrap-datepicker.js" %}'></script>
{% endblock %}

{% block js %}
<script language='javascript' type='text/javascript'>
  $('select').selectpicker();
  $('.datepicker').datepicker({
    format: 'dd/mm/yyyy'
  });
</script>
{% endblock %}
