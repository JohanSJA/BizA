{% extends 'base_app.html' %}

{% block breadcrumb %}
<li><a href='{% url "home" %}'>Home</a></li>
<li>Stocks</li>
<li><a href='{% url "stocks-stock-list" %}'>Stocks</a></li>
<li class='active'>{{ stock.code }}</li>
{% endblock %}

{% block content_app %}
<div class='well well-sm'>
  <div class='btn-group'>
    <a href='{% url "stocks-stock-edit" stock.pk %}' class='btn btn-default'>Edit Info</a>
    <a href='{% url "stocks-stock-component-edit" stock.pk %}' class='btn btn-default'>Edit Components</a>
    <a href='{% url "stocks-stock-code-print-new" stock.pk %}' target='_blank' class='btn btn-default'>Print Code</a>
  </div>
</div>

<div class='row'>
  <div class='col-lg-6'>
    <div class='panel panel-default'>
      <div class='panel-heading'>Info</div>
      <div class='panel-body'>
        <dl class='dl-horizontal'>
          <dt>Code</dt>
          <dd>{{ stock.code }}</dd>
          <dt>Name</dt>
          <dd>{{ stock.name }}</dd>
          <dt>Unit</dt>
          <dd>{{ stock.uom }}</dd>
          <dt>Discontinued</dt>
          <dd>{{ stock.discontinued }}</dd>
          <dt>Note</dt>
          <dd>{{ stock.note|default:'-' }}</dd>
        </dl>
      </div>
    </div>
  </div>

  <div class='col-lg-6'>
    {% if components %}
    <div class='panel panel-default'>
      <div class='panel-heading'>Components</div>
      <table class='table table-striped table-hover table-bordered table-responsive'>
        <thead>
          <tr>
            <th>Content</th>
            <th class='text-right'>Quantity</th>
            <th>UOM</th>
          </tr>
        </thead>
        <tbody>
          {% for comp in components %}
          <tr>
            <td><a href='{% url "stocks-stock-detail" comp.content.pk %}'>{{ comp.content }}</a></td>
            <td class='text-right'>{{ comp.quantity }}</td>
            <td>{{ comp.content.uom }}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
    {% endif %}

    {% if packages %}
    <div class='panel panel-default'>
      <div class='panel-heading'>Packages</div>
      <table class='table table-striped table-hover table-bordered table-responsive'>
        <thead>
          <tr>
            <th>Package</th>
          </tr>
        </thead>
        <tbody>
          {% for package in packages %}
          <tr>
            <td><a href='{% url "stocks-stock-detail" package.stock.pk %}'>{{ package.stock }}</a></td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
    {% endif %}

    <div class='panel panel-default'>
      <div class='panel-heading'>Logs</div>
      <div class='panel-body'>
        <dl class='dl-horizontal'>
          <dt>Balance</dt>
          <dd>{{ stock.balance }}</dd>
        </dl>
      </div>
      <table class='table table-striped table-hover table-responsive'>
        <thead>
          <tr>
            <th>No.</th>
            <th>Warehouse</th>
            <th class='text-right'>Balance</th>
          </tr>
        </thead>
        <tfoot>
          <tr>
            <td colspan='3'>
              Total {{ logs|length }} log{{ logs|pluralize }}.
            </td>
          </tr>
        </tfoot>
        <tbody>
          {% for log in logs %}
          <tr>
            <td><a href='{% url "stocks-log-detail" log.pk %}'>{{ forloop.counter }}</a></td>
            <td><a href='{% url "stocks-warehouse-detail" log.warehouse.pk %}'>{{ log.warehouse }}</a></td>
            <td class='text-right'>{{ log.balance|default:'0' }}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
</div>
{% endblock %}
