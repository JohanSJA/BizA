{% extends 'base_app.html' %}

{% block breadcrumb %}
<li><a href='{% url "home" %}'>Home</a></li>
<li>Stocks</li>
<li><a href='{% url "stocks-log-list" %}'>Logs</a></li>
<li class='active'>{{ log.pk }}</li>
{% endblock %}

{% block content_app %}
<div class='row'>
  <div class='col-lg-4'>
    <div class='panel panel-default'>
      <div class='panel-heading'>Info</div>
      <div class='panel-body'>
        <dl class='dl-horizontal'>
          <dt>Warehouse</dt>
          <dd>{{ log.warehouse }}</dd>
          <dt>Stock</dt>
          <dd>{{ log.stock }}</dd>
          <dt>UOM</dt>
          <dd>{{ log.stock.uom }}</dd>
          <dt>Balance</dt>
          <dd>{{ balance.changes__sum }}</dd>
        </dl>
      </div>
    </div>
  </div>

  <div class='col-lg-8'>
    <div class='panel panel-default'>
      <div class='panel-heading'>Entries</div>
      <table class='table table-striped table-hover table-bordered table-responsive'>
        <thead>
          <tr>
            <th>Timestamp</th>
            <th>Reason</th>
            <th class='text-right'>In</th>
            <th class='text-right'>Out</th>
          </tr>
        </thead>
        <tfoot>
          <tr>
            <td colspan='4'>Total {{ entries|length }} entr{{ entries|pluralize:'y,ies' }}.</td>
          </tr>
        </tfoot>
        <tbody>
          {% for entry in entries %}
          <tr>
            <td>{{ entry.timestamp }}</td>
            <td>{{ entry.get_reason_display }}</td>
            {% if entry.changes > 0 %}
            <td class='text-right'>{{ entry.changes }}</td>
            <td class='text-right'>&nbsp;</td>
            {% else %}
            <td class='text-right'>&nbsp;</td>
            <td class='text-right'>{% with out=entry.changes %}{{ out }}{% endwith %}</td>
            {% endif %}
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
</div>
{% endblock %}
